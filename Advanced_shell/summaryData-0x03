#!/bin/bash
OUTPUT_FILE="pokemon_report.csv"
echo "Name,Height (m),Weight (kg)" > "$OUTPUT_FILE"
for file in pokemon_data/*.json; do
	jq -r '"\(.name) \(.height) \(.weight)"' "$file" | \
	sed 's/^./\u&/' | \
	awk '{
		name = toupper(substr($1,1,1)) substr($1,2);
		printf "%s,%.1f,%.1f\n", name, $2/10, $3/10
	}' >> "$OUTPUT_FILE"
done
echo "CSV Report generated at: $OUTPUT_FILE"
cat "$OUTPUT_FILE"
echo ""
awk -F',' 'NR>1 {
	h_sum += $2;
	w_sum += $3;
	count++;
}
END {
	if (count > 0) {
		printf "Average Height: %.2f m\n", h_sum/count;
		printf "Average Weight: %.2f kg\n", w_sum/count;
	}
}' "$OUTPUT_FILE"
